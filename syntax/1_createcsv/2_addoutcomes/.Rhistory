library(readxl)
library(tidyverse)
library(readr)
library(stringi)
#open CH outcome data - without Nigeria
Outcome_without_Nigeria <- read_excel("data\\raw\\CH_2021\\nov 2021\\Outcome_without_Nigeria.xlsx")
getwd()
library(readxl)
library(tidyverse)
library(readr)
library(stringi)
#open CH outcome data - without Nigeria
Outcome_without_Nigeria <- read_excel("data\\raw\\CH_2021\\nov 2021\\Outcome_without_Nigeria_Nov2021.xlsx")
#replace 0 with NA
Outcome_without_Nigeria <- Outcome_without_Nigeria %>% mutate_at(vars(CA_curr:Mort_proj), ~replace(., . == 0, NA))
#select only current outcome indicators
Outcome_without_Nigeria <- Outcome_without_Nigeria %>% select(-CA_proj, -EME_proj, -Nutrition_proj, -Mort_proj) %>%
rename(adm0_name = ADMIN0Name, adm1_name = ADMIN1Name, adm2_name = ADMIN2Name, foodconsumption_phase = CA_curr, livelihoods_phase = EME_Curr, nutrition_phase = Nutrition_Curr, mortality_phase = Mort_Curr)
#remove characters and proper case
Outcome_without_Nigeria <- Outcome_without_Nigeria %>%  mutate_at(c("adm0_name","adm1_name","adm2_name"), ~stri_trans_general(.x, id = "Latin-ASCII"))
Outcome_without_Nigeria <- Outcome_without_Nigeria %>%  mutate_at(c("adm0_name","adm1_name","adm2_name"), ~str_to_title(.x))
#There are some countries areas where analysis was only done at amd1 level so remove the adm2 duplication for these countries
Outcome_without_Nigeria_adm1 <- Outcome_without_Nigeria  %>% filter(adm0_name %in% c("Guinee Bissau","Cote D'ivoire","Gambia","Togo")) %>% select(-adm2_name)
Outcome_without_Nigeria_adm1 <- Outcome_without_Nigeria_adm1 %>% mutate(adm0_name = recode(adm0_name,"Guinee Bissau" = "Guinea-Bissau"))
#change names of Countries
Outcome_without_Nigeria <- Outcome_without_Nigeria %>% mutate(adm0_name = case_when(
adm0_name == "Burkina" ~ "Burkina Faso",
adm0_name == "Cameroun" ~ "Cameroon",
adm0_name == "Guinee" ~ "Guinea",
adm0_name == "Mauritanie" ~ "Mauritania",
adm0_name == "Tchad" ~ "Chad",
TRUE ~ adm0_name))
